function getData(data,req,res){
	var mongoClient = require("mongodb").MongoClient;
	var url = require("url");
	var url = "mongodb://localhost:27017/test";
    console.log("mongo.js开始执行");
    console.log("接收到的数据是:"+data);
	var findResult = function(db,callback){     
	     var cursor = db.collection("openTest").find({name:{$regex:data}},{'_id':0},{limit:4}).toArray(function(err,item){
              console.log(item);
              res.end(req.query.callback+"("+JSON.stringify(item)+")");
              callback();
	     });
	}

	mongoClient.connect(url,function(err,db){
		
	    if(err != null){
	    	console.log("连接数据库失败");
	    	return;
	    }
	    console.log("connected!");
	    findResult(db,function(){
	    	db.close();
	    	console.log("关闭数据库成功");
	    });
		
	});

}

module.exports.getdata = getData; 